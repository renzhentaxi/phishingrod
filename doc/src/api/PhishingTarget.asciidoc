= API
:table-caption!:

== get

.Info
[cols="2*"]
|====

|Type
|GET

|Url
|/api/phishingTarget/get?id=*targetId*

|Description
|Returns the phishing target specified by *targetId*.
|====

.Response Code
[cols="2*"]
|====
|404 NOT FOUND
|When phishing Target with id does not exist.
|200 OK
|When the request is valid and has been executed successfully.
|====

[#PhishingTargetJson]
.Phishing Target Json Representation
[source]
----

id : number,
lastModified :time,
createdAt: time,
parameters:{
        parameterName: parameterValue,
        ....
}

----
== all

[cols="2*"]
|====

|Type
|GET

|Url
|/api/phishingTarget/all

|Description
|Returns all phishingTargets on the server as an array
|====

.Json Response Format
[source]
----
[
    PhishingTargetJson, <1>
    ...
]
----
<1> refer to <<PhishingTargetJson,Phishing Target Json Representation>>

== delete

.Info
[cols="2*"]
|====

|Type
|POST

|Url
|/api/phishingTarget/delete?id=*targetId*

|Description
|deletes the phishingTarget with the id specified by *targetId*

|====

.Response Code
[cols="2*"]
|====
|NOT FOUND 404
|When the phishingTarget with id does not exist, returns error 404.

|OK 200
|When the request is valid and has been executed successfully.
|====

== add

.Info
[cols="2*"]
|====

|Type
|POST

|Url
|/api/phishingTarget/add?targetDetail=*targetJson*

|Description
|adds the phishing target specified by *targetJson* to the database.
Returns the id of the phishingTarget if successful
|====

.Response Code
[cols="2*"]
|====
|BAD 400
|When the *targetJson* contains an emailAddress that already exists in the database.
|OK 200
|When the request is valid and executed successfully.
|====

.TargetJson Format
[source]
----
{
    emailAddress: newEmailAddress,
    parameters:
    {
        parameterName: parameterValue,
        ...
    }
}
----
Note: Id, createdAt, lastModified are not required and will be ignored if included.

.Response Json
[source]
{
    id:number,
    lastModified: time,
    createdAt: time
}


== modify

.Info
[cols="2*"]
|====

|Type
|POST

|Url
|/api/phishingTarget/mod?id=*targetId*&modification=*modDetail*

|Description
|modifies the phishingTarget specified with *targetId* with the json provided by *modDetail*
|====

.Response Code
[cols="2*"]
|====
|Error 404
|When the phishingTarget with id does not exist.
|OK 200
|When the request is valid and executed successfully.
|====

.ModDetail Json Format
[source]
----
{
    [emailAddress: newEmailAddress],<1>
    [parameters: newParameters]     <1>
                                    <2>
}
----
<1> They are optional and order doesn't matter.
<2> lastModified and createdAt are not required since they are controlled by the server automatically.
If they are ignored if they are included.
